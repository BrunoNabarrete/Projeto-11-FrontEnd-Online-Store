{"ast":null,"code":"var _jsxFileName = \"/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/InitialPage.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\nimport { saveItem, getItem } from '../components/LocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass InitialPage extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      categories: [],\n      inputText: '',\n      isButtonDisable: true,\n      search: [],\n      isUndefined: true,\n      cartItems: []\n    };\n\n    this.onInputChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, () => {\n        this.setState({\n          isButtonDisable: false\n        });\n      });\n    };\n\n    this.onButtonClick = async event => {\n      event.preventDefault();\n      const {\n        inputText\n      } = this.state;\n      const {\n        value\n      } = event.target;\n      const validQuery = inputText === '' ? '$QUERY' : inputText;\n      const validId = value === '' ? '$CATEGORY_ID' : value;\n      const dataFetch = await getProductsFromCategoryAndQuery(validId, validQuery);\n      const validInput = dataFetch.results.length === 0;\n      this.setState({\n        search: dataFetch.results,\n        isUndefined: validInput,\n        inputText: '',\n        isButtonDisable: true\n      });\n    };\n\n    this.onSaveCart = product => {\n      this.setState(prev => ({\n        cartItems: [...prev.cartItems, product]\n      }), () => {\n        const {\n          cartItems\n        } = this.state;\n        saveItem('cart', cartItems);\n        this.setState({\n          cartLength: cartItems.length\n        });\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const categoriesData = await getCategories();\n    const saveCartItems = getItem('cart');\n    const validSaveCart = saveCartItems === null ? [] : saveCartItems;\n    this.setState({\n      categories: categoriesData,\n      cartItems: validSaveCart,\n      cartLength: validSaveCart.length\n    });\n  }\n\n  render() {\n    const {\n      categories,\n      isButtonDisable,\n      inputText,\n      search,\n      isUndefined,\n      cartLength\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: categories.map(categorie => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [categorie.name, /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              \"data-testid\": \"category\",\n              name: categorie.id,\n              id: categorie.id,\n              value: categorie.id,\n              onClick: this.onButtonClick,\n              children: \"a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)]\n          }, categorie.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        \"data-testid\": \"home-initial-message\",\n        htmlFor: \"searchInput\",\n        children: [\"Digite algum termo de pesquisa ou escolha uma categoria.\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"inputText\",\n          id: \"searchInput\",\n          \"data-testid\": \"query-input\",\n          onChange: this.onInputChange,\n          value: inputText,\n          placeholder: \"Procure o seu produto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"data-testid\": \"query-button\",\n        disabled: isButtonDisable,\n        onClick: this.onButtonClick,\n        children: \"Pesquisar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), isUndefined ? /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Nenhum produto foi encontrado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"ol\", {\n        children: search.map(eachProduct => /*#__PURE__*/_jsxDEV(\"li\", {\n          \"data-testid\": \"product\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: eachProduct.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: eachProduct.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: eachProduct.thumbnail,\n            alt: eachProduct.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }, this), eachProduct.shipping.free_shipping && /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"free-shipping\",\n            children: \"Frete gr\\xE1tis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            \"data-testid\": \"product-add-to-cart\",\n            type: \"button\",\n            onClick: () => this.onSaveCart(eachProduct),\n            name: eachProduct.title,\n            children: \"Adicionar ao Carrinho\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/pageCard/${eachProduct.id}`,\n            \"data-testid\": \"product-detail-link\",\n            params: {\n              name: eachProduct.title,\n              image: eachProduct.thumbnail,\n              price: eachProduct.price,\n              shipping: eachProduct.shipping.free_shipping\n            },\n            children: \"Datails\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 19\n          }, this)]\n        }, eachProduct.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"shoppingCart\",\n        \"data-testid\": \"shopping-cart-button\",\n        to: \"./ShoppingCart\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"shopping-cart-size\",\n          children: `ShoppingCart ${cartLength} items`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default InitialPage;","map":{"version":3,"names":["React","Component","Link","getCategories","getProductsFromCategoryAndQuery","saveItem","getItem","InitialPage","state","categories","inputText","isButtonDisable","search","isUndefined","cartItems","onInputChange","target","name","value","setState","onButtonClick","event","preventDefault","validQuery","validId","dataFetch","validInput","results","length","onSaveCart","product","prev","cartLength","componentDidMount","categoriesData","saveCartItems","validSaveCart","render","map","categorie","id","eachProduct","title","price","thumbnail","shipping","free_shipping","image"],"sources":["/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/InitialPage.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\nimport { saveItem, getItem } from '../components/LocalStorage';\n\nclass InitialPage extends Component {\n  state = {\n    categories: [],\n    inputText: '',\n    isButtonDisable: true,\n    search: [],\n    isUndefined: true,\n    cartItems: [],\n  };\n\n  async componentDidMount() {\n    const categoriesData = await getCategories();\n    const saveCartItems = getItem('cart');\n    const validSaveCart = saveCartItems === null ? [] : saveCartItems;\n    this.setState({\n      categories: categoriesData,\n      cartItems: validSaveCart,\n      cartLength: validSaveCart.length,\n    });\n  }\n\n  onInputChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, () => {\n      this.setState({\n        isButtonDisable: false,\n      });\n    });\n  };\n\n  onButtonClick = async (event) => {\n    event.preventDefault();\n    const { inputText } = this.state;\n    const { value } = event.target;\n    const validQuery = inputText === '' ? '$QUERY' : inputText;\n    const validId = value === '' ? '$CATEGORY_ID' : value;\n    const dataFetch = await getProductsFromCategoryAndQuery(validId, validQuery);\n    const validInput = dataFetch.results.length === 0;\n    this.setState({\n      search: dataFetch.results,\n      isUndefined: validInput,\n      inputText: '',\n      isButtonDisable: true,\n    });\n  };\n\n  onSaveCart = (product) => {\n    this.setState((prev) => ({\n      cartItems: [...prev.cartItems, product],\n    }), () => {\n      const { cartItems } = this.state;\n      saveItem('cart', cartItems);\n      this.setState({ cartLength: cartItems.length });\n    });\n  };\n\n  render() {\n    const { categories, isButtonDisable, inputText, search, isUndefined,\n      cartLength } = this.state;\n    return (\n      <div>\n        <div>\n          <ul>\n            {\n              categories.map((categorie) => (\n                <li key={ categorie.id }>\n                  {categorie.name}\n                  <button\n                    type=\"button\"\n                    data-testid=\"category\"\n                    name={ categorie.id }\n                    id={ categorie.id }\n                    value={ categorie.id }\n                    onClick={ this.onButtonClick }\n                  >\n                    a\n                  </button>\n                </li>\n              ))\n            }\n          </ul>\n        </div>\n        <label\n          data-testid=\"home-initial-message\"\n          htmlFor=\"searchInput\"\n        >\n          Digite algum termo de pesquisa ou escolha uma categoria.\n          <input\n            type=\"text\"\n            name=\"inputText\"\n            id=\"searchInput\"\n            data-testid=\"query-input\"\n            onChange={ this.onInputChange }\n            value={ inputText }\n            placeholder=\"Procure o seu produto\"\n          />\n        </label>\n        <button\n          type=\"button\"\n          data-testid=\"query-button\"\n          disabled={ isButtonDisable }\n          onClick={ this.onButtonClick }\n        >\n          Pesquisar\n        </button>\n        {\n          isUndefined ? (<h4>Nenhum produto foi encontrado</h4>) : (\n            <ol>\n              {search.map((eachProduct) => (\n                <li data-testid=\"product\" key={ eachProduct.id }>\n                  <p>{ eachProduct.title }</p>\n                  <p>{ eachProduct.price }</p>\n                  <img src={ eachProduct.thumbnail } alt={ eachProduct.title } />\n                  {\n                    eachProduct.shipping.free_shipping\n                    && <p data-testid=\"free-shipping\">Frete grátis</p>\n                  }\n                  <button\n                    data-testid=\"product-add-to-cart\"\n                    type=\"button\"\n                    onClick={ () => this.onSaveCart(eachProduct) }\n                    name={ eachProduct.title }\n                  >\n                    Adicionar ao Carrinho\n                  </button>\n                  <Link\n                    to={ `/pageCard/${eachProduct.id}` }\n                    data-testid=\"product-detail-link\"\n                    params={ { name: eachProduct.title,\n                      image: eachProduct.thumbnail,\n                      price: eachProduct.price,\n                      shipping: eachProduct.shipping.free_shipping,\n                    } }\n                  >\n                    Datails\n                  </Link>\n                </li>\n              ))}\n            </ol>\n          )\n        }\n        <Link\n          className=\"shoppingCart\"\n          data-testid=\"shopping-cart-button\"\n          to=\"./ShoppingCart\"\n        >\n          <p data-testid=\"shopping-cart-size\">{ `ShoppingCart ${cartLength} items` }</p>\n        </Link>\n      </div>\n    );\n  }\n}\nexport default InitialPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}