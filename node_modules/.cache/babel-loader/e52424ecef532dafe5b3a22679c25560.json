{"ast":null,"code":"var _jsxFileName = \"/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/PageCard.jsx\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { saveItem, getItem } from '../components/LocalStorage';\nimport Email from './Email';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PageCard extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      product: {},\n      cartItems: [],\n      cartLength: 0,\n      shipping: false\n    };\n\n    this.onSaveCart = () => {\n      const {\n        product\n      } = this.state;\n      this.setState(prev => ({\n        cartItems: [...prev.cartItems, product]\n      }), () => {\n        const {\n          cartItems\n        } = this.state;\n        saveItem('cart', cartItems);\n        this.setState({\n          cartLength: cartItems.length\n        });\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const data = await fetch(url);\n    const dataJson = await data.json();\n    const saveCartItems = getItem('cart');\n    const validSaveCart = saveCartItems === null ? [] : saveCartItems;\n    this.setState({\n      product: dataJson,\n      cartItems: validSaveCart,\n      cartLength: validSaveCart.length,\n      shipping: dataJson.shipping.free_shipping\n    });\n  }\n\n  render() {\n    const {\n      product: {\n        title,\n        price,\n        thumbnail\n      },\n      cartLength,\n      shipping\n    } = this.state;\n    console.log(shipping);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pageCard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        \"data-testid\": \"product-detail-name\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        \"data-testid\": \"product-detail-price\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        \"data-testid\": \"product-detail-image\",\n        src: thumbnail,\n        alt: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), shipping && /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"free-shipping\",\n        children: \"Frete gr\\xE1tis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"product-detail-add-to-cart\",\n        type: \"button\",\n        onClick: this.onSaveCart,\n        name: title,\n        children: \"Adicionar ao Carrinho\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/ShoppingCart\",\n        \"data-testid\": \"shopping-cart-button\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"shopping-cart-size\",\n          children: `Carrinho de compra. ${cartLength} itens`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Email, { ...this.props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nPageCard.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    })\n  }).isRequired\n};\nexport default PageCard;","map":{"version":3,"names":["React","Link","PropTypes","saveItem","getItem","Email","PageCard","Component","state","product","cartItems","cartLength","shipping","onSaveCart","setState","prev","length","componentDidMount","match","params","id","props","url","data","fetch","dataJson","json","saveCartItems","validSaveCart","free_shipping","render","title","price","thumbnail","console","log","propTypes","shape","string","isRequired"],"sources":["/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/PageCard.jsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { saveItem, getItem } from '../components/LocalStorage';\nimport Email from './Email';\n\nclass PageCard extends React.Component {\n  state = {\n    product: {},\n    cartItems: [],\n    cartLength: 0,\n    shipping: false,\n  };\n\n  async componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const data = await fetch(url);\n    const dataJson = await data.json();\n    const saveCartItems = getItem('cart');\n    const validSaveCart = saveCartItems === null ? [] : saveCartItems;\n    this.setState({\n      product: dataJson,\n      cartItems: validSaveCart,\n      cartLength: validSaveCart.length,\n      shipping: dataJson.shipping.free_shipping,\n    });\n  }\n\n  onSaveCart = () => {\n    const { product } = this.state;\n    this.setState((prev) => ({\n      cartItems: [...prev.cartItems, product],\n    }), () => {\n      const { cartItems } = this.state;\n      saveItem('cart', cartItems);\n      this.setState({ cartLength: cartItems.length });\n    });\n  };\n\n  render() {\n    const { product: { title, price, thumbnail },\n      cartLength, shipping } = this.state;\n    console.log(shipping);\n    return (\n      <div className=\"pageCard\">\n        <h1 data-testid=\"product-detail-name\">{ title }</h1>\n        <h1 data-testid=\"product-detail-price\">{ price }</h1>\n        <img data-testid=\"product-detail-image\" src={ thumbnail } alt={ title } />\n        {\n          shipping && <p data-testid=\"free-shipping\">Frete gr√°tis</p>\n        }\n        <button\n          data-testid=\"product-detail-add-to-cart\"\n          type=\"button\"\n          onClick={ this.onSaveCart }\n          name={ title }\n        >\n          Adicionar ao Carrinho\n        </button>\n        <Link to=\"/ShoppingCart\" data-testid=\"shopping-cart-button\">\n          <p\n            data-testid=\"shopping-cart-size\"\n          >\n            { `Carrinho de compra. ${cartLength} itens` }\n          </p>\n        </Link>\n        <Email { ...this.props } />\n      </div>\n    );\n  }\n}\n\nPageCard.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nexport default PageCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}