{"ast":null,"code":"var _jsxFileName = \"/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/Email.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { saveItem, getItem } from '../components/LocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Email extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isButtonDisable: true,\n      email: '',\n      rating: '',\n      text: '',\n      avaliations: [],\n      btnCheck: false\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value,\n        btnCheck: false\n      }, () => {\n        this.inputValidation();\n      });\n    };\n\n    this.inputValidation = () => {\n      const {\n        email,\n        rating\n      } = this.state;\n      const validation = email.includes('@') && rating !== '';\n      this.setState({\n        isButtonDisable: !validation\n      });\n    };\n\n    this.buttonClick = event => {\n      event.preventDefault();\n      const {\n        email,\n        text,\n        rating,\n        isButtonDisable\n      } = this.state;\n      this.setState({\n        btnCheck: isButtonDisable\n      });\n\n      if (!isButtonDisable) {\n        this.setState(prev => ({\n          avaliations: [...prev.avaliations, {\n            email,\n            text,\n            rating\n          }],\n          email: '',\n          rating: '',\n          text: '',\n          btnCheck: false,\n          isButtonDisable: true\n        }), () => {\n          const {\n            avaliations\n          } = this.state;\n          const {\n            id\n          } = this.state;\n          saveItem(id, avaliations);\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match\n    } = this.props;\n    const {\n      params: {\n        id\n      }\n    } = match;\n    const gotItem = getItem(id);\n    const isItValid = gotItem === null ? [] : gotItem;\n    this.setState(() => ({\n      avaliations: isItValid,\n      id\n    }));\n  }\n\n  render() {\n    const {\n      email,\n      text,\n      avaliations,\n      btnCheck\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.buttonClick,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"product-detail-email\",\n            type: \"text\",\n            value: email,\n            placeholder: \"Digite o seu email\",\n            name: \"email\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          \"data-testid\": \"1-rating\",\n          htmlFor: \"evaluator1\",\n          children: [\"1\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"1\",\n            id: \"evaluator1\",\n            name: \"rating\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          \"data-testid\": \"2-rating\",\n          htmlFor: \"evaluator2\",\n          children: [\"2\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"2\",\n            id: \"evaluator2\",\n            name: \"rating\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          \"data-testid\": \"3-rating\",\n          htmlFor: \"evaluator3\",\n          children: [\"3\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"3\",\n            id: \"evaluator3\",\n            name: \"rating\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          \"data-testid\": \"4-rating\",\n          htmlFor: \"evaluator4\",\n          children: [\"4\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"4\",\n            id: \"evaluator4\",\n            name: \"rating\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          \"data-testid\": \"5-rating\",\n          htmlFor: \"evaluator5\",\n          children: [\"5\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"5\",\n            id: \"evaluator5\",\n            name: \"rating\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          \"data-testid\": \"product-detail-evaluation\",\n          placeholder: \"Digite o seu comentario\",\n          value: text,\n          onChange: this.handleChange,\n          name: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"submit-review-btn\",\n          type: \"submit\",\n          children: \"Avaliar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), btnCheck && /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"error-msg\",\n        children: \"Campos inv\\xE1lidos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 23\n      }, this), avaliations.map(eachAvaliation => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"review-card-email\",\n          children: eachAvaliation.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"review-card-evaluation\",\n          children: eachAvaliation.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-testid\": \"review-card-rating\",\n          children: eachAvaliation.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, this)]\n      }, eachAvaliation.email, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true);\n  }\n\n}\n\nEmail.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    })\n  }).isRequired\n};\nexport default Email;","map":{"version":3,"names":["React","Component","PropTypes","saveItem","getItem","Email","state","isButtonDisable","email","rating","text","avaliations","btnCheck","handleChange","target","name","value","setState","inputValidation","validation","includes","buttonClick","event","preventDefault","prev","id","componentDidMount","match","props","params","gotItem","isItValid","render","map","eachAvaliation","propTypes","shape","string","isRequired"],"sources":["/home/bruno/Documentos/Projetos/Projeto-lessons-learned/sd-026-a-project-frontend-online-store/src/pages/Email.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { saveItem, getItem } from '../components/LocalStorage';\n\nclass Email extends Component {\n  state = {\n    isButtonDisable: true,\n    email: '',\n    rating: '',\n    text: '',\n    avaliations: [],\n    btnCheck: false,\n  };\n\n  componentDidMount() {\n    const { match } = this.props;\n    const { params: { id } } = match;\n    const gotItem = getItem(id);\n    const isItValid = gotItem === null ? [] : gotItem;\n    this.setState(() => ({\n      avaliations: isItValid,\n      id,\n    }));\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n      btnCheck: false,\n    }, () => {\n      this.inputValidation();\n    });\n  };\n\n  inputValidation = () => {\n    const { email, rating } = this.state;\n    const validation = email.includes('@')\n      && rating !== '';\n    this.setState({ isButtonDisable: !validation });\n  };\n\n  buttonClick = (event) => {\n    event.preventDefault();\n    const { email, text, rating, isButtonDisable } = this.state;\n    this.setState({ btnCheck: isButtonDisable });\n    if (!isButtonDisable) {\n      this.setState((prev) => ({\n        avaliations: [...prev.avaliations,\n          {\n            email,\n            text,\n            rating,\n          },\n        ],\n        email: '',\n        rating: '',\n        text: '',\n        btnCheck: false,\n        isButtonDisable: true,\n      }), () => {\n        const { avaliations } = this.state;\n        const { id } = this.state;\n        saveItem(id, avaliations);\n      });\n    }\n  };\n\n  render() {\n    const { email, text, avaliations, btnCheck } = this.state;\n\n    return (\n      <>\n        <form onSubmit={ this.buttonClick }>\n          <label htmlFor=\"email\">\n            Email\n            <input\n              data-testid=\"product-detail-email\"\n              type=\"text\"\n              value={ email }\n              placeholder=\"Digite o seu email\"\n              name=\"email\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label data-testid=\"1-rating\" htmlFor=\"evaluator1\">\n            1\n            <input\n              type=\"radio\"\n              value=\"1\"\n              id=\"evaluator1\"\n              name=\"rating\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label data-testid=\"2-rating\" htmlFor=\"evaluator2\">\n            2\n            <input\n              type=\"radio\"\n              value=\"2\"\n              id=\"evaluator2\"\n              name=\"rating\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label data-testid=\"3-rating\" htmlFor=\"evaluator3\">\n            3\n            <input\n              type=\"radio\"\n              value=\"3\"\n              id=\"evaluator3\"\n              name=\"rating\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label data-testid=\"4-rating\" htmlFor=\"evaluator4\">\n            4\n            <input\n              type=\"radio\"\n              value=\"4\"\n              id=\"evaluator4\"\n              name=\"rating\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label data-testid=\"5-rating\" htmlFor=\"evaluator5\">\n            5\n            <input\n              type=\"radio\"\n              value=\"5\"\n              id=\"evaluator5\"\n              name=\"rating\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <br />\n          <textarea\n            data-testid=\"product-detail-evaluation\"\n            placeholder=\"Digite o seu comentario\"\n            value={ text }\n            onChange={ this.handleChange }\n            name=\"text\"\n          />\n          <br />\n          <button\n            data-testid=\"submit-review-btn\"\n            type=\"submit\"\n          >\n            Avaliar\n          </button>\n        </form>\n        {\n          btnCheck && <p data-testid=\"error-msg\">Campos inválidos</p>\n        }\n        {\n          avaliations.map((eachAvaliation) => (\n            <div key={ eachAvaliation.email }>\n              <p data-testid=\"review-card-email\">{ eachAvaliation.email }</p>\n              <p data-testid=\"review-card-evaluation\">{ eachAvaliation.text }</p>\n              <p data-testid=\"review-card-rating\">{ eachAvaliation.rating }</p>\n            </div>\n          ))\n        }\n      </>\n    );\n  }\n}\n\nEmail.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nexport default Email;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}